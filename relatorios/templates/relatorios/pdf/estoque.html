{% extends "relatorios/pdf/base.html" %}

{% block content %}
<!-- Estatísticas Gerais -->
<div class="stats-box no-break">
    <h3>Resumo do Estoque</h3>
    <table style="width: 100%; margin-bottom: 0;">
        <tr>
            <td style="border: none;"><strong>Total de Produtos:</strong> {{ stats.total_products }}</td>
            <td style="border: none;"><strong>Valor Total:</strong> R$ {{ stats.total_value|floatformat:2 }}</td>
        </tr>
        <tr>
            <td style="border: none;"><strong>Produtos Críticos:</strong> <span class="text-danger">{{ stats.critical_count }}</span></td>
            <td style="border: none;"><strong>Produtos em Baixa:</strong> <span class="text-warning">{{ stats.low_count }}</span></td>
        </tr>
    </table>
</div>

<!-- Listagem de Produtos -->
<h3>Produtos em Estoque</h3>
<table>
    <thead>
        <tr>
            <th>SKU</th>
            <th>Produto</th>
            <th>Categoria</th>
            <th style="text-align: center;">Estoque</th>
            <th style="text-align: center;">Est. Mín.</th>
            <th style="text-align: center;">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.sku }}</td>
            <td><strong>{{ product.name }}</strong></td>
            <td>{{ product.category.name }}</td>
            <td style="text-align: center;">{{ product.current_stock }} {{ product.unit.name }}</td>
            <td style="text-align: center;">{{ product.min_stock }}</td>
            <td style="text-align: center;">
                {% if product.current_stock == 0 %}
                    <span class="badge badge-danger">CRÍTICO</span>
                {% elif product.current_stock <= product.min_stock %}
                    <span class="badge badge-warning">BAIXO</span>
                {% else %}
                    <span class="badge badge-success">OK</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
